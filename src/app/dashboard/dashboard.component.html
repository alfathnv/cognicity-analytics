<div id="mapWrapper">
  <app-map
    (finishedLoading)="slider.initData()"
    #map>
  </app-map>
</div>

<div id="sliderWrapper">
  <app-slider
    [map]="map.map"
    [floodAreas]="map.floodAreas"
    (drawChart)="chart.drawChart($event)"
    (updateChart)="chart.updateChart($event)"
    (updateChartScale)="chart.updateScale($event)"
    #slider>
  </app-slider>
</div>

<div id="legendWrapper">
  <app-legend>
  </app-legend>
</div>

<div id="analyticsWrapper">
  <div id="chartsWrapper">
    <app-charts
      [reportsSource]="slider.reportsSource"
      #chart>
    </app-charts>
  </div>

  <div id="statsWrapper">
    <div id="reportTools">
      <a
        [routerLink]="['/report']"
        [queryParams]="{
          start: slider.selectedTimePeriod.start,
          end: slider.selectedTimePeriod.end,
          updated: 'null'
        }"
        *ngIf="!slider.generatingTableData && slider.selectedTimePeriod">
        Generate report
      </a>
      <mat-spinner
        id="spinner"
        diameter="26"
        *ngIf="slider.generatingTableData">
      </mat-spinner>
    </div>

    <app-stats
      [isRefreshing]="slider.refreshingStats.reports || slider.refreshingStats.floodAreas"
      [floodAreasCount]="slider.floodAreasCount"
      [reportsCount]="slider.reportsCount">
    </app-stats>

    <p id="disclaimer">
      Note: The number of flooded areas does not mean the whole area is flooded. It shows that there are floods happening within those counted areas
    </p>
  </div>
</div>
